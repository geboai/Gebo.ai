[supervisord]
nodaemon=true
logfile=/var/log/supervisord.log

[program:mongod]
command=/usr/bin/mongod --bind_ip_all --dbpath=/data/db --logpath=/var/log/mongodb/mongod.log
autorestart=true
startsecs=3
stdout_logfile=/var/log/mongodb/stdout.log
stderr_logfile=/var/log/mongodb/stderr.log

[program:qdrant]
command=/usr/bin/qdrant --config-path /etc/qdrant/config.yaml
autorestart=true
startsecs=3
stdout_logfile=/var/log/qdrant/stdout.log
stderr_logfile=/var/log/qdrant/stderr.log

[program:gebo.ai]
command=/opt/java/jdk-21.0.8/bin/java -Dsun.jnu.encoding=UTF-8 -Dfile.encoding=UTF-8 --add-opens=java.base/java.nio.charset=ALL-UNNAMED --enable-native-access=ALL-UNNAMED -Xms2g -Xmx4g -XX:+AggressiveHeap -XX:MaxMetaspaceSize=512m -XX:+PrintGCDetails -Xlog:gc:/opt/gebo.ai/logs/gc.log -jar gebo.ai.app-0.9.9.7-SNAPSHOT-bootable.jar
directory=/opt/gebo.ai
environment JAVA_HOME="/opt/java/jdk-21.0.8"
autostart=true
autorestart=true
stderr_logfile=/var/log/gebo-ai.err.log
stdout_logfile=/var/log/gebo-ai.out.log

# opzionale: aspetta che mongod parta prima di qdrant (soft)
[group:services]
programs=mongod,qdrant,gebo.ai
