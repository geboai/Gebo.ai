<!--
/**
 * This Source Code is subject to the terms of the 
 * Gebo.ai community version Mozilla Public License Version 2.0 (MPL-2.0) â€” With Data Protection Clauses
 * If a copy of the LICENCE was not distributed with this file, You can obtain one at 
 * https://gebo.ai/gebo-ai-community-version-mozilla-public-license-version-2-0-mpl-2-0-with-data-protection-clauses/  
 * and https://mozilla.org/MPL/2.0/.
 * Copyright (c) 2025+ Gebo.ai 
 */
 -->
 
 
 

<p-dialog  [maximizable]="true" [visible]="visible" [modal]="true" [style]="{width:'95%',height:'800px'}" (onHide)="closeModal($event)"
  [closable]="false" [showHeader]="false">
  <p-panel #chpwdUI header="Change password form" [formGroup]="formGroup" *ngIf="visible">
    <p-blockUI [target]="chpwdUI" [blocked]="loading">
      <i class="pi pi-lock" style="font-size: 3rem"></i>
    </p-blockUI>
    <p-messages [value]="userMessages" [enableService]="false"></p-messages>
    <div class="grid">
      <div class="col-6">
        <div class="flex flex-column gap-2 ">
          <label for="username">E-mail</label>
          <input pInputText id="username" formControlName="username" class="col-12" [required]="true" [readonly]="true"
            aria-describedby="username-help">

          <small id="username-help">
            E-mail as username to login
          </small>
        </div>
      </div>
      <div class="col-6">
        <div class="flex flex-column gap-2 ">
          <label for="oldPassword">Old Password</label>
          <p-password id="oldPassword" formControlName="oldPassword" class="col-12" [required]="true"
            aria-describedby="oldPassword-help" [feedback]="false"></p-password>
          <small id="oldPassword-help">
            Actual password to login
          </small>
        </div>
      </div>
      <div class="col-6">
        <div class="flex flex-column gap-2 ">
          <label for="newPassword">New password</label>
          <p-password id="newPassword" formControlName="newPassword" class="col-12" [required]="true"
            aria-describedby="newPassword-help"></p-password>
          <small id="newPassword-help">
            new password
          </small>
        </div>
      </div>
      <div class="col-6">
        <div class="flex flex-column gap-2 ">
          <label for="newPassword1">Confirm new password</label>
          <p-password id="newPassword1" formControlName="newPassword1" class="col-12" [required]="true"
            aria-describedby="newPassword1-help" [feedback]="false"></p-password>
          <small id="newPassword1-help">
            Confirm new password
          </small>
        </div>
      </div>
      <div class="col-2">
        <p-button icon="pi pi-hashtag" [outlined]="true" [disabled]="formGroup.invalid" label="change password"
          (onClick)="doChangePassword()" styleClass="w-full"></p-button>
      </div>
      <div class="col-2">
        <p-button severity="contrast"  [outlined]="true"  label="Cancel"
          (onClick)="closeModal(true)" styleClass="w-full"></p-button>
      </div>
    </div>
  </p-panel>
</p-dialog>
