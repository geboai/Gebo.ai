<!--
/**
 * This Source Code is subject to the terms of the 
 * Gebo.ai community version Mozilla Public License Version 2.0 (MPL-2.0) â€” With Data Protection Clauses
 * If a copy of the LICENCE was not distributed with this file, You can obtain one at 
 * https://gebo.ai/gebo-ai-community-version-mozilla-public-license-version-2-0-mpl-2-0-with-data-protection-clauses/  
 * and https://mozilla.org/MPL/2.0/.
 * Copyright (c) 2025+ Gebo.ai 
 */
 -->
 
 
 

<p-blockUI [target]="llmSystems" [blocked]="loading">
    <i class="pi pi-lock" style="font-size: 3rem"></i>
</p-blockUI>
<p-panel #llmSystems>
    <div class="grid geboFullHeight">
        <div class="col-12 geboThirdHeight"><b *ngIf="chatModels && chatModels.length">Configured chat models</b>
            <p-table [value]="chatModels" *ngIf="chatModels && chatModels.length">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Code</th>
                        <th>Description</th>
                        <th>Model provider</th>
                        <th>Model </th>
                        <th></th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-model>
                    <tr>
                        <td>{{ model.configuration?.code }}</td>
                        <td>{{ model.configuration?.description }}</td>
                        <td>{{ model.configuration?.modelTypeCode }}</td>
                        <td>{{ model.configuration?.modelCode }}</td>
                        <td>
                            <gebo-ai-test-chat-component
                                [chatModelCode]="model.configuration.code"></gebo-ai-test-chat-component>
                        </td>
                        <td>
                            <p-button (onClick)="editModel(model)" [outlined]="true" label="configure"
                                icon="pi pi-wrench"></p-button>
                        </td>
                    </tr>
                </ng-template>

            </p-table>
        </div>
        <div class="col-12 geboThirdHeight"><b *ngIf="embeddingModels && embeddingModels.length">Configured embedding models</b>
            <p-table [value]="embeddingModels" *ngIf="embeddingModels && embeddingModels.length">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Code</th>
                        <th>Description</th>
                        <th>Model provider</th>
                        <th>Model </th>
                        <th></th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-model>
                    <tr>
                        <td>{{ model.configuration?.code }}</td>
                        <td>{{ model.configuration?.description }}</td>
                        <td>{{ model.configuration?.modelTypeCode }}</td>
                        <td>{{ model.configuration?.modelCode }}</td>
                        <td>

                        </td>
                        <td><p-button (onClick)="editEmbeddingModel(model)" [outlined]="true" label="configure"
                                icon="pi pi-wrench"></p-button></td>
                    </tr>
                </ng-template>

            </p-table>
        </div>
        <div class="col-12 geboThirdHeight">
            <div class="grid" [formGroup]="createChoices">
                <div class="col-3">
                    <geboai-editable-listbox-component formControlName="chat"
                        placeholder="Select the chat model provider" [data]="chatModelsTypes">
                    </geboai-editable-listbox-component>
                </div>
                <div class="col-3">
                    <p-button label="New chat model configuration" [outlined]="true" icon="pi pi-microchip-ai"
                        [disabled]="createChoices.controls['chat'].value?false:true"
                        (onClick)="configureChatModel()"></p-button>
                </div>

                <div class="col-3">
                    <geboai-editable-listbox-component formControlName="embed"
                        placeholder="Select the embedding model provider" [data]="embeddingModelsTypes">
                    </geboai-editable-listbox-component>
                </div>
                <div class="col-3">
                    <p-button label="New embedding model configuration" [outlined]="true" icon="pi pi-microchip-ai"
                        [disabled]="createChoices.controls['embed'].value?false:true"
                        (onClick)="configureEmbeddingModel();"></p-button>

                </div>
            </div>
        </div>
    </div>



</p-panel>