<!--
/**
 * This Source Code is subject to the terms of the 
 * Gebo.ai community version Mozilla Public License Version 2.0 (MPL-2.0) â€” With Data Protection Clauses
 * If a copy of the LICENCE was not distributed with this file, You can obtain one at 
 * https://gebo.ai/gebo-ai-community-version-mozilla-public-license-version-2-0-mpl-2-0-with-data-protection-clauses/  
 * and https://mozilla.org/MPL/2.0/.
 * Copyright (c) 2025+ Gebo.ai 
 */
 -->
 
<p-button id="PromptWizardBtn" gebo-ai-label icon="pi pi-sparkles" label="Prompt wizard" [outlined]="true" title="Use this to use an LLM to generate the prompt for your objectives" (onClick)="dialogVisible=true"></p-button>
<p-dialog [maximizable]="true" [visible]="dialogVisible" [modal]="true" [style]="{width:'100%',height:'100%'}" (onHide)="closeModal($event)"
    [closable]="false" [showHeader]="false">
    <p-blockUI [target]="promptWizardUI" [blocked]="loading">
        <i class="pi pi-lock" style="font-size: 3rem"></i>
    </p-blockUI>
    <p-panel id="promptWizardUI" gebo-ai-label #promptWizardUI header="Prompt template generation wizard" [formGroup]="formGroup">
        <p-messages [(value)]="userMessages" [enableService]="false" [closable]="false" />
        <div class="grid">
            <div class="col-12">
                <gebo-ai-field id="modelCode" label="Chat model to use" [required]="true" help="Choose the chat model you whant to ask the prompt template generation">
                    <geboai-editable-listbox-component
                        id="modelCode"
                        formControlName="modelCode"
                        placeholder="Select a chat model"
                        [data]="chatModels"
                        [required]="true"
                        gebo-ai-field-element
                    ></geboai-editable-listbox-component>
                </gebo-ai-field>
            </div>
            <div class="col-12">
                <gebo-ai-field id="query" label="Prompt template request" [required]="true" help="Specify in 2nd person wich is the objective that the AI will support the user">
                    <textarea
                        rows="5"
                        cols="250"
                        [required]="true"
                        pTextarea
                        id="query"
                        formControlName="query"
                        gebo-ai-field-element
                    ></textarea>
                </gebo-ai-field>
            </div>
            <div class="col-12" [formGroup]="responseFormGroup">
                <gebo-ai-field id="response" label="Suggested prompt template" [required]="true" help="Generated template text for your objective (you can change or correct/modify it)">
                    <textarea
                        rows="5"
                        cols="250"
                        [readonly]="!lastResponse?.result?.response"
                        pTextarea
                        id="response"
                        formControlName="response"
                        [required]="true"
                        gebo-ai-field-element
                    ></textarea>
                </gebo-ai-field>
            </div>
        </div>
        <div style="vertical-align: baseline;width: '500px';">
            <div class="grid">
                <div class="col-3">
                    <p-button id="generatePrompt" gebo-ai-label [outlined]="true" label="Generate prompt" (onClick)="doGeneratePrompt()"
                        icon="pi pi-microchip-ai" [disabled]="formGroup.invalid" styleClass="w-full"></p-button>
                </div>
                <div class="col-3">
                    <p-button id="acceptPrompt" gebo-ai-label [outlined]="true" label="Accept prompt" severity="success" styleClass="w-full" 
                        icon="pi pi-check" (onClick)="doAcceptPrompt()"
                        [disabled]="(formGroup.invalid || !(lastResponse?.result?.response)) || responseFormGroup.invalid" /></div>
                <div class="col-3">
                    <p-button id="cancel" gebo-ai-label [outlined]="true" label="Cancel" severity="contrast" (onClick)="doCancelAction()" styleClass="w-full" />
                </div>
            </div>

        </div>
    </p-panel>
</p-dialog>

<!-- Treated By refactory robot GeboAIHtmlMultilanguageBot -->
<!-- Treated By refactory robot ROBOT-REFACTORY-PRIMENG-COMPONENTS-HTML-NODES-GEBOAI -->